<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>test graph</title>
  <meta name="description" content="{{ site.description }}">

  <!-- base font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400">
  <!-- Accent font -->
  <link href="https://fonts.googleapis.com/css?family=Antic|Carrois+Gothic+SC|Josefin+Sans:300,400|Muli:300,400|Oxygen:300,400|Raleway:300,400|Roboto:300,400" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Economica|Oswald:300|Pathway+Gothic+One" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Arima+Madurai|Cinzel+Decorative|Poiret+One|Amiri" rel="stylesheet">

  <!-- Bootstrap -->
  <!-- <link href="{{site.baseurl}}/css/bootstrap.min.css" rel="stylesheet" media="screen"> -->

  <!-- Font Awesome -->
  <!-- <link rel="stylesheet" href="{{site.baseurl}}/css/font-awesome.min.css"> -->

  <!--custom css styling -->
  <link rel="stylesheet" href="/css/main.css">

  <style>
  .dot {
    stroke: #000;
    fill: #00f;
  }

  .x.axis line {
    fill: none;
    stroke: #000;
  }
  .x.axis text {
       font-size: 13px;
  }
  .axis path {
       display:none;
  }
  .y.axis line {
       display:none;
  }
  </style>


</head>

<body>
<h1 class = "blueclass">test title</h1>


<script src="https://d3js.org/d3.v3.min.js"></script>

<!-- <script src="./scripts/scatter.js" ></script> -->
<script>

    // selectcurrent year
     var year = '204';

     // radius of dots in pixels.
     var radius = 10;

     // set
     var margin = {top: 30, right: 0, bottom: 0, left: 250},
          width = 1000 - margin.left - margin.left,
          height = 450 - margin.top - margin.bottom;

     var body = d3.select("body");

     var x = d3.scale.linear()
          .range([0, width]);

     var y = d3.scale.ordinal()
          .rangeBands([0, height], 0.2, 0);

     var xAxis = d3.svg.axis()
          .scale(x)
          .orient("top")
          .ticks(5, "%");

     var yAxis = d3.svg.axis()
          .scale(y)
          .orient("left");

     body.append("h2")
          .text("Age distribution of the world, " + year);

     body.append("div")
          .attr("class", "top-label age-label")
       .append("p")
          .text("age group");

     body.append("div")
          .attr("class", "top-label")
       .append("p")
          .text("portion of the population");

     body.append("div")
          .attr("class", "clearfix")

     d3.csv("data/DHS_stunted_unweighted.csv", function(error, data){
       if(error) throw error;

          var popData = data.filter(function(element) {return element.year != year});

          x.domain([0, d3.max(data, function(element) { return element.avg; })]);

          y.domain(popData.map(function(element) {return element.lvdzone}));

          var svg = body.append("svg")
               .attr("width", width + margin.left + margin.right)
               .attr("height", height + margin.top + margin.bottom)
           .append("g")
               .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          var barGroup = svg.append("g")
               .attr("class", "dot");

          barGroup.selectAll("dot")
               .data(popData)
            .enter().append("circle")
               //.attr("x", 0)
               .attr("cx", function(d) {return x(d.avg)})
               .attr("cy", function(d) {return y(d.lvdzone)})
               .attr("r", radius)
               .attr("opacity", 1)
               .transition()
               .duration(6000)
               .attr("cx", function(d) {return x(d.avg/10)})
               .attr("opacity", 0.4);

          svg.append("g")
               .call(xAxis)
               .attr("class", "x axis")

          svg.append("g")
               .call(yAxis)
               .attr("class","y axis")
     });
</script>


</body>
</html>
